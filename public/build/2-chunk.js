webpackJsonp([2],{874:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var n,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,s,o):n(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o};Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),i=s(62),o=s(897),a=s(885),c=s(886),u=s(887),d=s(899),l=s(888);let h=class{};h=r([n.NgModule({imports:[i.SharedModule,o.StudentRouteModule],declarations:[a.StudentListComponent,c.StudentIndivComponent,u.StudentFridgeComponent,d.StudentPhageComponent],providers:[l.StudentResolver]})],h),t.StudentModule=h},876:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortStudents=function(e,t){var s=e.lastName.toLowerCase().localeCompare(t.lastName.toLowerCase());return 0===s?e.firstName.toLowerCase().localeCompare(t.firstName.toLowerCase()):s}},885:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var n,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,s,o):n(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),o=s(10),a=s(414),c=s(21),u=s(69),d=s(876);let l=class{constructor(e,t){this._studentService=e,this._authService=t,this.errorMessage="",this.isDestroyed$=new o.Subject}ngOnInit(){let e=this._authService.getUser();this._studentService.listStudents(e.id).takeUntil(this.isDestroyed$).subscribe(e=>{this.students=e.sort(d.sortStudents)},e=>{this.errorMessage=u.readErrorMessage(e)})}ngOnDestroy(){this.isDestroyed$.next(!0),this.isDestroyed$.unsubscribe()}};l=r([i.Component({selector:"student-list",templateUrl:"./app/admin/student/student-list/student-list.template.html"}),n("design:paramtypes",[a.StudentService,c.AuthenticationService])],l),t.StudentListComponent=l},886:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var n,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,s,o):n(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),o=s(14),a=s(10);s(68);const c=s(21),u=s(414),d=s(116),l=s(898),h=s(69);let p=class{constructor(e,t,s,r,n){this._router=e,this._route=t,this._authService=s,this._studentService=r,this._scenarioService=n,this.roles=l.StudentRolesArray,this.errorMessage="",this.isDestroyed$=new a.Subject}ngOnInit(){this._admin=this._authService.getUser(),this.paramObserver=this._route.params.subscribe(e=>{let t=e.studentId;this._studentService.getStudent(this._admin.id,t).takeUntil(this.isDestroyed$).subscribe(e=>{this.student=e,this.newRole=this.student.role,this._scenarioService.listScenarios().takeUntil(this.isDestroyed$).subscribe(e=>{this.scenarios=e})},e=>{this.errorMessage=h.readErrorMessage(e)})})}getScenStatus(e){let t=this.student.accessGranted[e];return!0===t?"Access granted":!1===t?"Access not granted":"NA"}getStudentCourse(){let e=this.student;return e.course?"<a [routlerLink]=\"['/admin/courses/', \""+e.course.courseNum+']">s.course.courseNum</a>':"No course"}accessButtonClass(e){let t=this.student.accessGranted[e];return{"btn btn-sm":!0,"btn-outline-secondary":t,"btn-outline-dark":!t}}accessButtonText(e){return this.student.accessGranted[e]?"Revoke access":"Grant access"}toggleAccess(e){let t=this.student.accessGranted[e];this._studentService.grantScenAccess(this._admin.id,this.student.userId,e,!t).takeUntil(this.isDestroyed$).subscribe(t=>{void 0!==t&&null!==t&&(this.student.accessGranted[e]=t.accessGranted[e])},e=>{this.errorMessage=e.error.message})}roleDisabled(e){return void 0!==this._admin&&(this.student.userId===this._admin.id||("admin"===e&&this._admin.role<2||"instr"===e&&this._admin.role<1))}roleButtonClass(e){return{"btn btn-sm":!0,"btn-outline-secondary":e!==this.student.role,"btn-secondary":e===this.student.role}}clickButton(e){this._studentService.setStudentRole(this._admin.id,this.student.userId,e).takeUntil(this.isDestroyed$).subscribe(e=>{this.student=e},e=>{this.errorMessage=e.error.message})}ngOnDestroy(){this.paramObserver.unsubscribe(),this.isDestroyed$.next(!0),this.isDestroyed$.unsubscribe()}};p=r([i.Component({selector:"student-indiv",templateUrl:"app/admin/student/student-indiv/student-indiv.template.html"}),n("design:paramtypes",[o.Router,o.ActivatedRoute,c.AuthenticationService,u.StudentService,d.ScenarioService])],p),t.StudentIndivComponent=p},887:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var n,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,s,o):n(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),o=s(14),a=s(10);s(68);const c=s(414),u=s(21),d=s(69);let l=class{constructor(e,t,s,r){this._router=e,this._route=t,this._studentService=s,this._authService=r,this.hasFridge=!1,this.viewStrains="all",this.errorMessage="",this.isDestroyed$=new a.Subject}ngOnInit(){this.paramObserver=this._route.params.subscribe(e=>{let t=e.studentId,s=e.scenId,r=this._authService.getUser();this._studentService.getFridge(r.id,t,s).takeUntil(this.isDestroyed$).subscribe(e=>{this.fridge=e,this.hasFridge=void 0!==e.strains,this.hasFridge&&this.fridge.strains.sort((e,t)=>e.strainNum-t.strainNum),this.setPhage("all")},e=>{this.errorMessage=d.readErrorMessage(e)})})}getButtonClass(e){return{"btn btn-sm":!0,"btn-primary":e===this.viewStrains,"btn-outline-primary":e!==this.viewStrains}}setPhage(e){this.viewStrains=e,"all"===this.viewStrains?this.strainList=this.fridge.strains:this.strainList=this.fridge.strains.filter(e=>"unknown"===e.phageType||!("user"!==e.phageType||!e.submitted))}ngOnDestroy(){this.paramObserver.unsubscribe(),this.isDestroyed$.next(!0),this.isDestroyed$.unsubscribe()}};l=r([i.Component({selector:"student-fridge",templateUrl:"app/admin/student/student-fridge/student-fridge.template.html"}),n("design:paramtypes",[o.Router,o.ActivatedRoute,c.StudentService,u.AuthenticationService])],l),t.StudentFridgeComponent=l},888:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var n,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,s,o):n(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(1),o=s(0),a=s(21),c=s(414);let u=class{constructor(e,t){this._studentService=e,this._authService=t}resolve(e,t){let s=this._authService.getUser();const r=e.params.studentId;return r?this._studentService.getStudent(s.id,r):new o.Observable}};u=r([i.Injectable(),n("design:paramtypes",[c.StudentService,a.AuthenticationService])],u),t.StudentResolver=u},897:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var n,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,s,o):n(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o};Object.defineProperty(t,"__esModule",{value:!0});const n=s(1),i=s(14),o=s(885),a=s(886),c=s(887),u=s(185),d=s(888);t.StudentRoutes=[{path:"",children:[{path:":studentId",resolve:{student:d.StudentResolver},data:{breadcrumbs:"{{ student.firstName }} {{ student.lastName }}"},children:[{path:":scenId",component:c.StudentFridgeComponent,resolve:{scenario:u.ScenarioResolver},data:{breadcrumbs:"{{ scenario.label }}"}},{path:"",component:a.StudentIndivComponent}]},{path:"",component:o.StudentListComponent}]}];let l=class{};l=r([n.NgModule({imports:[i.RouterModule.forChild(t.StudentRoutes)],exports:[i.RouterModule]})],l),t.StudentRouteModule=l},898:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StudentRolesArray=[{key:"student",label:"Student",value:0},{key:"instr",label:"Instructor",value:1},{key:"admin",label:"Administrator",value:2}]},899:function(e,t,s){"use strict";var r=this&&this.__decorate||function(e,t,s,r){var n,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,s):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,s,r);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(i<3?n(o):i>3?n(t,s,o):n(t,s))||o);return i>3&&o&&Object.defineProperty(t,s,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});const i=s(1);let o=class{constructor(){}formatPhageType(){if(this.phage){this.phage.phageType;return"user"===this.phage.phageType&&this.phage.submitted?"SUBMISSION":this.phage.phageType.toUpperCase()}return""}};r([i.Input(),n("design:type",Object)],o.prototype,"phage",void 0),o=r([i.Component({selector:"student-phage",templateUrl:"app/admin/student/student-fridge/student-phage.template.html"}),n("design:paramtypes",[])],o),t.StudentPhageComponent=o}});