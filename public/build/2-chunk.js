webpackJsonp([2],{1e3:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});var s=r(1);r(68);var n=function(){function e(){}return e=o([s.Component({selector:"course-cmp",templateUrl:"app/admin/course/course.template.html"})],e)}();t.CourseComponent=n},1001:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),n=r(20),i=r(989),c=r(204),u=r(984),a=r(985),l=r(986),f=r(987),d=r(988);t.CourseRoutes=[{path:"",children:[{path:"create",component:u.CourseCreateComponent,data:{breadcrumbs:"Create new course"}},{path:":courseNum",resolve:{course:i.CourseResolver},data:{breadcrumbs:"{{course.courseNum}}"},children:[{path:"edit",component:l.CourseEditComponent},{path:":scenId",component:d.CourseScenarioComponent,resolve:{scenario:c.ScenarioResolver},data:{breadcrumbs:"{{ scenario.label }}"}},{path:"",component:a.CourseIndivComponent}]},{path:"",component:f.CourseListComponent}]}];var p=function(){function e(){}return e=o([s.NgModule({imports:[n.RouterModule.forChild(t.CourseRoutes)],exports:[n.RouterModule]})],e)}();t.CourseRouteModule=p},978:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i};Object.defineProperty(t,"__esModule",{value:!0});var s=r(1),n=r(63),i=r(1e3),c=r(984),u=r(985),a=r(986),l=r(987),f=r(988),d=r(441),p=r(1001),h=r(989),m=function(){function e(){}return e=o([s.NgModule({imports:[n.SharedModule,p.CourseRouteModule],declarations:[i.CourseComponent,c.CourseCreateComponent,u.CourseIndivComponent,a.CourseEditComponent,l.CourseListComponent,f.CourseScenarioComponent],entryComponents:[d.ConfirmDeleteDialogComponent],providers:[h.CourseResolver]})],e)}();t.CourseModule=m},982:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortStudents=function(e,t){var r=e.lastName.toLowerCase().localeCompare(t.lastName.toLowerCase());return 0===r?e.firstName.toLowerCase().localeCompare(t.firstName.toLowerCase()):r}},984:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(20),c=r(203),u=r(24),a=function(){function e(e,t,r,o){this._courseService=e,this._router=t,this._route=r,this._authService=o,this.errorMessage="",this.courseDetails={}}return e.prototype.ngOnInit=function(){this.admin=this._authService.getUser()},e.prototype.createCourse=function(){var e=this;""===this.courseDetails.courseNum?this.errorMessage="Course number is required":this.subscription=this._courseService.createCourse(this.admin.id,this.courseDetails).subscribe(function(t){e._router.navigate(["../",t.courseNum],{relativeTo:e._route})},function(t){e.errorMessage=t.error.message})},e.prototype.ngOnDestory=function(){this.subscription&&this.subscription.unsubscribe()},e=o([n.Component({selector:"course-create-cmp",templateUrl:"app/admin/course/course-create/course-create.template.html",styleUrls:["app/admin/course/course-create/course-create.style.css"]}),s("design:paramtypes",[c.CourseService,i.Router,i.ActivatedRoute,u.AuthenticationService])],e)}();t.CourseCreateComponent=a},985:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(20),c=r(10);r(68);var u=r(203),a=r(126),l=r(24),f=r(982),d=function(){function e(e,t,r,o,s){this._router=e,this._route=t,this._courseService=r,this._authService=o,this._scenarioService=s,this.students=[],this.errorMessage="",this.isDestroyed$=new c.Subject}return e.prototype.ngOnInit=function(){var e=this,t=this._authService.getUser();this.paramObserver=this._route.params.subscribe(function(r){var o=r.courseNum;e._courseService.getCourse(t.id,o).takeUntil(e.isDestroyed$).subscribe(function(r){e.courseInfo=r,e._courseService.getStudents(t.id,o).takeUntil(e.isDestroyed$).subscribe(function(t){e.students=t.sort(f.sortStudents),e._scenarioService.listScenarios().takeUntil(e.isDestroyed$).subscribe(function(t){e.scenarios=t})})},function(t){e.errorMessage=t.message})})},e.prototype.ngOnDestroy=function(){this.paramObserver.unsubscribe(),this.isDestroyed$.next(!0),this.isDestroyed$.unsubscribe()},e=o([n.Component({selector:"course-indiv-cmp",templateUrl:"app/admin/course/course-indiv/course-indiv.template.html",styleUrls:["app/admin/course/course-indiv/course-indiv.style.css"]}),s("design:paramtypes",[i.Router,i.ActivatedRoute,u.CourseService,l.AuthenticationService,a.ScenarioService])],e)}();t.CourseIndivComponent=d},986:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(20),c=r(127),u=r(10);r(68);var a=r(203),l=r(24),f=r(441),d=r(982),p=r(69),h=function(){function e(e,t,r,o,s){this._router=e,this._route=t,this._courseService=r,this._authService=o,this._modalService=s,this.errorMessage="",this.isDestroyed$=new u.Subject}return e.prototype.ngOnInit=function(){var e=this;this._admin=this._authService.getUser(),this.paramObserver=this._route.params.subscribe(function(t){var r=t.courseNum;e._courseService.getCourse(e._admin.id,r).takeUntil(e.isDestroyed$).subscribe(function(t){e.courseInfo=t,e._courseService.getPossibleInstructors(e._admin.id,r).takeUntil(e.isDestroyed$).subscribe(function(t){e.possibleInstr=t.sort(d.sortStudents)},function(t){e.errorMessage=p.readErrorMessage(t),e.possibleInstr=[]})},function(t){e.errorMessage=p.readErrorMessage(t)})})},e.prototype.onCancel=function(){this._router.navigate(["../"],{relativeTo:this._route})},e.prototype.update=function(){var e=this;this._courseService.editCourse(this._admin.id,this.courseInfo.courseNum,this.courseInfo).takeUntil(this.isDestroyed$).subscribe(function(t){e._router.navigate(["../"],{relativeTo:e._route})},function(t){e.errorMessage=p.readErrorMessage(t)})},e.prototype.addInstructor=function(){var e=this;this.selectedAdd&&this._courseService.addInstructor(this._admin.id,this.courseInfo.courseNum,this.selectedAdd).takeUntil(this.isDestroyed$).subscribe(function(t){e.courseInfo=t,e.possibleInstr=e.possibleInstr.filter(function(t){return t.userId!=e.selectedAdd})},function(t){e.errorMessage=p.readErrorMessage(t)})},e.prototype.deleteCourse=function(){var e=this,t=this._modalService.open(f.ConfirmDeleteDialogComponent,{size:"sm"});t.componentInstance.message="Are you sure you want to delete course "+this.courseInfo.courseNum+"?",t.result.then(function(t){"delete"===t&&e._callDeleteCourse()},function(e){})},e.prototype._callDeleteCourse=function(){var e=this;this._courseService.deleteCourse(this._admin.id,this.courseInfo.courseNum).takeUntil(this.isDestroyed$).subscribe(function(t){e._router.navigate(["/admin/courses"])},function(t){e.errorMessage=p.readErrorMessage(t)})},e.prototype.deleteCourseStudents=function(){var e=this,t=this._modalService.open(f.ConfirmDeleteDialogComponent,{size:"sm"});t.componentInstance.message="Are you sure you want to delete all students in course "+this.courseInfo.courseNum+"?",t.result.then(function(t){"delete"===t&&e._callDeleteCourseStudents()},function(e){})},e.prototype._callDeleteCourseStudents=function(){var e=this;this._courseService.deleteStudents(this._admin.id,this.courseInfo.courseNum).takeUntil(this.isDestroyed$).subscribe(function(t){e._router.navigate(["/admin/courses/",e.courseInfo.courseNum])},function(t){e.errorMessage=p.readErrorMessage(t)})},e.prototype.ngOnDestroy=function(){this.paramObserver.unsubscribe(),this.isDestroyed$.next(!0),this.isDestroyed$.unsubscribe()},e=o([n.Component({selector:"course-edit-cmp",templateUrl:"app/admin/course/course-edit/course-edit.template.html",styleUrls:["app/admin/course/course-edit/course-edit.style.css"]}),s("design:paramtypes",[i.Router,i.ActivatedRoute,a.CourseService,l.AuthenticationService,c.NgbModal])],e)}();t.CourseEditComponent=h},987:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(203),c=r(24),u=function(){function e(e,t){this._courseService=e,this._authService=t}return e.prototype.ngOnInit=function(){var e=this,t=this._authService.getUser();this.subscription=this._courseService.listCourses(t.id).subscribe(function(t){e.courses=t})},e.prototype.ngOnDestroy=function(){this.subscription&&this.subscription.unsubscribe()},e=o([n.Component({selector:"course-list-cmp",templateUrl:"./app/admin/course/course-list/course-list.template.html"}),s("design:paramtypes",[i.CourseService,c.AuthenticationService])],e)}();t.CourseListComponent=u},988:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(20),c=r(10);r(68);var u=r(203),a=r(126),l=r(24),f=r(440),d=r(69),p=function(){function e(e,t,r,o,s,n){this._router=e,this._route=t,this._authService=r,this._courseService=o,this._studentService=s,this._scenarioService=n,this.students=[],this.errorMessage="",this.isDestroyed$=new c.Subject}return e.prototype.ngOnInit=function(){var e=this;this.admin=this._authService.getUser(),this.paramObserver=this._route.params.subscribe(function(t){var r=t.courseNum,o=t.scenId;e.courseNum=r.toUpperCase(),e._scenarioService.getScenario(o).takeUntil(e.isDestroyed$).subscribe(function(t){e.scenario=t,e._courseService.getScenarioStatus(e.admin.id,r,o).takeUntil(e.isDestroyed$).subscribe(function(t){e.students=t},function(t){e.errorMessage=d.readErrorMessage(t)})},function(t){e.errorMessage=d.readErrorMessage(t)})})},e.prototype.formatAccess=function(e){return e?"Access granted":"Access not granted"},e.prototype.accessButtonClass=function(e){return{"btn btn-sm":!0,"btn-outline-secondary":e,"btn-outline-dark":!e}},e.prototype.accessButtonText=function(e){return e?"Revoke access":"Grant access"},e.prototype.toggleAccess=function(e){var t=this,r=this.students[e].status,o=this.scenario.scenCode,s=this.students[e].userId;this._studentService.grantScenAccess(this.admin.id,s,o,!r).takeUntil(this.isDestroyed$).subscribe(function(r){void 0!==r&&null!==r&&(t.students[e].status=r.accessGranted[o])},function(e){t.errorMessage=e.error.message})},e.prototype.goToFridge=function(e){this._router.navigate(["/admin/students/",e,this.scenario.scenCode])},e.prototype.ngOnDestroy=function(){this.paramObserver.unsubscribe(),this.isDestroyed$.next(!0),this.isDestroyed$.unsubscribe()},e=o([n.Component({selector:"course-scen-smp",templateUrl:"app/admin/course/course-scenario/course-scenario.template.html",styleUrls:["app/admin/course/course-scenario/course-scenario.style.css"]}),s("design:paramtypes",[i.Router,i.ActivatedRoute,l.AuthenticationService,u.CourseService,f.StudentService,a.ScenarioService])],e)}();t.CourseScenarioComponent=p},989:function(e,t,r){"use strict";var o=this&&this.__decorate||function(e,t,r,o){var s,n=arguments.length,i=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,o);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(i=(n<3?s(i):n>3?s(t,r,i):s(t,r))||i);return n>3&&i&&Object.defineProperty(t,r,i),i},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),c=r(203),u=r(24),a=function(){function e(e,t){this._courseService=e,this._authService=t}return e.prototype.resolve=function(e,t){var r=this._authService.getUser(),o=e.params.courseNum;return o?this._courseService.getCourse(r.id,o):new i.Observable},e=o([n.Injectable(),s("design:paramtypes",[c.CourseService,u.AuthenticationService])],e)}();t.CourseResolver=a}});
